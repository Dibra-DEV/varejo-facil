trigger:
  branches:
    include:
      - main

pool:
  name: vm-windows

steps:

- task: NodeTool@0
  inputs:
    versionSpec: '20.x'
  displayName: '1. Instalar Node.js'

- script: npm install --force
  displayName: '2. Instalar DependÃªncias'
  
- script: npm run build
  displayName: '3. Executar Build do Projeto'

- task: CopyFiles@2
  displayName: '4. Copiar Arquivos de Build'
  inputs:
    SourceFolder: '$(Build.SourcesDirectory)\dist'
    Contents: '**'
    TargetFolder: 'C:\app\varejo-facil'
    CleanTargetFolder: true
    OverWrite: true
